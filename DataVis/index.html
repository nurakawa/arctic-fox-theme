---
layout: home
title:  Covid-19 in New Zealand - Google Mobility Data
---
<!DOCTYPE html>
<html lang="en">
  <body>
    <br>
    <p>Prototype for course "Data Visualization". Visualizing change in mobility in 2020 using Google Mobility Data. 
    Please make some selections! </p>
    <!-- Select country 
    TODO: Filter by region == ""
    source: https://bl.ocks.org/Saigesp/0b0995536ec3e691cec6725783870a70-->
        
<select id="calendarCountry">
<option value="Afghanistan">Afghanistan</option> 
<option value="Africa">Africa</option> 
<option value="Albania">Albania</option> 
<option value="Algeria">Algeria</option> 
<option value="Andorra">Andorra</option> 
<option value="Angola">Angola</option> 
<option value="Anguilla">Anguilla</option> 
<option value="Antigua and Barbuda">Antigua and Barbuda</option> 
<option value="Argentina">Argentina</option> 
<option value="Armenia">Armenia</option> 
<option value="Aruba">Aruba</option> 
<option value="Asia">Asia</option> 
<option value="Australia">Australia</option> 
<option value="Austria">Austria</option> 
<option value="Azerbaijan">Azerbaijan</option> 
<option value="Bahamas">Bahamas</option> 
<option value="Bahrain">Bahrain</option> 
<option value="Bangladesh">Bangladesh</option> 
<option value="Barbados">Barbados</option> 
<option value="Belarus">Belarus</option> 
<option value="Belgium">Belgium</option> 
<option value="Belize">Belize</option> 
<option value="Benin">Benin</option> 
<option value="Bermuda">Bermuda</option> 
<option value="Bhutan">Bhutan</option> 
<option value="Bolivia">Bolivia</option> 
<option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option> 
<option value="Botswana">Botswana</option> 
<option value="Brazil">Brazil</option> 
<option value="Brunei">Brunei</option> 
<option value="Bulgaria">Bulgaria</option> 
<option value="Burkina Faso">Burkina Faso</option> 
<option value="Burundi">Burundi</option> 
<option value="Cambodia">Cambodia</option> 
<option value="Cameroon">Cameroon</option> 
<option value="Canada">Canada</option> 
<option value="Cape Verde">Cape Verde</option> 
<option value="Cayman Islands">Cayman Islands</option> 
<option value="Central African Republic">Central African Republic</option> 
<option value="Chad">Chad</option> 
<option value="Chile">Chile</option> 
<option value="China">China</option> 
<option value="Colombia">Colombia</option> 
<option value="Comoros">Comoros</option> 
<option value="Congo">Congo</option> 
<option value="Costa Rica">Costa Rica</option> 
<option value="Cote d'Ivoire">Cote d'Ivoire</option> 
<option value="Croatia">Croatia</option> 
<option value="Cuba">Cuba</option> 
<option value="Curacao">Curacao</option> 
<option value="Cyprus">Cyprus</option> 
<option value="Czechia">Czechia</option> 
<option value="Democratic Republic of Congo">Democratic Republic of Congo</option> 
<option value="Denmark">Denmark</option> 
<option value="Djibouti">Djibouti</option> 
<option value="Dominica">Dominica</option> 
<option value="Dominican Republic">Dominican Republic</option> 
<option value="Ecuador">Ecuador</option> 
<option value="Egypt">Egypt</option> 
<option value="El Salvador">El Salvador</option> 
<option value="Equatorial Guinea">Equatorial Guinea</option> 
<option value="Eritrea">Eritrea</option> 
<option value="Estonia">Estonia</option> 
<option value="Eswatini">Eswatini</option> 
<option value="Ethiopia">Ethiopia</option> 
<option value="Europe">Europe</option> 
<option value="European Union">European Union</option> 
<option value="Faeroe Islands">Faeroe Islands</option> 
<option value="Falkland Islands">Falkland Islands</option> 
<option value="Fiji">Fiji</option> 
<option value="Finland">Finland</option> 
<option value="France">France</option> 
<option value="Gabon">Gabon</option> 
<option value="Gambia">Gambia</option> 
<option value="Georgia">Georgia</option> 
<option value="Germany">Germany</option> 
<option value="Ghana">Ghana</option> 
<option value="Gibraltar">Gibraltar</option> 
<option value="Greece">Greece</option> 
<option value="Greenland">Greenland</option> 
<option value="Grenada">Grenada</option> 
<option value="Guatemala">Guatemala</option> 
<option value="Guernsey">Guernsey</option> 
<option value="Guinea">Guinea</option> 
<option value="Guinea-Bissau">Guinea-Bissau</option> 
<option value="Guyana">Guyana</option> 
<option value="Haiti">Haiti</option> 
<option value="Honduras">Honduras</option> 
<option value="Hong Kong">Hong Kong</option> 
<option value="Hungary">Hungary</option> 
<option value="Iceland">Iceland</option> 
<option value="India">India</option> 
<option value="Indonesia">Indonesia</option> 
<option value="International">International</option> 
<option value="Iran">Iran</option> 
<option value="Iraq">Iraq</option> 
<option value="Ireland">Ireland</option> 
<option value="Isle of Man">Isle of Man</option> 
<option value="Israel">Israel</option> 
<option value="Italy">Italy</option> 
<option value="Jamaica">Jamaica</option> 
<option value="Japan">Japan</option> 
<option value="Jersey">Jersey</option> 
<option value="Jordan">Jordan</option> 
<option value="Kazakhstan">Kazakhstan</option> 
<option value="Kenya">Kenya</option> 
<option value="Kosovo">Kosovo</option> 
<option value="Kuwait">Kuwait</option> 
<option value="Kyrgyzstan">Kyrgyzstan</option> 
<option value="Laos">Laos</option> 
<option value="Latvia">Latvia</option> 
<option value="Lebanon">Lebanon</option> 
<option value="Lesotho">Lesotho</option> 
<option value="Liberia">Liberia</option> 
<option value="Libya">Libya</option> 
<option value="Liechtenstein">Liechtenstein</option> 
<option value="Lithuania">Lithuania</option> 
<option value="Luxembourg">Luxembourg</option> 
<option value="Macao">Macao</option> 
<option value="Madagascar">Madagascar</option> 
<option value="Malawi">Malawi</option> 
<option value="Malaysia">Malaysia</option> 
<option value="Maldives">Maldives</option> 
<option value="Mali">Mali</option> 
<option value="Malta">Malta</option> 
<option value="Marshall Islands">Marshall Islands</option> 
<option value="Mauritania">Mauritania</option> 
<option value="Mauritius">Mauritius</option> 
<option value="Mexico">Mexico</option> 
<option value="Micronesia (country)">Micronesia (country)</option> 
<option value="Moldova">Moldova</option> 
<option value="Monaco">Monaco</option> 
<option value="Mongolia">Mongolia</option> 
<option value="Montenegro">Montenegro</option> 
<option value="Montserrat">Montserrat</option> 
<option value="Morocco">Morocco</option> 
<option value="Mozambique">Mozambique</option> 
<option value="Myanmar">Myanmar</option> 
<option value="Namibia">Namibia</option> 
<option value="Nauru">Nauru</option> 
<option value="Nepal">Nepal</option> 
<option value="Netherlands">Netherlands</option> 
<option value="New Zealand">New Zealand</option> 
<option value="Nicaragua">Nicaragua</option> 
<option value="Niger">Niger</option> 
<option value="Nigeria">Nigeria</option> 
<option value="North America">North America</option> 
<option value="North Macedonia">North Macedonia</option> 
<option value="Northern Cyprus">Northern Cyprus</option> 
<option value="Norway">Norway</option> 
<option value="Oceania">Oceania</option> 
<option value="Oman">Oman</option> 
<option value="Pakistan">Pakistan</option> 
<option value="Palestine">Palestine</option> 
<option value="Panama">Panama</option> 
<option value="Papua New Guinea">Papua New Guinea</option> 
<option value="Paraguay">Paraguay</option> 
<option value="Peru">Peru</option> 
<option value="Philippines">Philippines</option> 
<option value="Poland">Poland</option> 
<option value="Portugal">Portugal</option> 
<option value="Qatar">Qatar</option> 
<option value="Romania">Romania</option> 
<option value="Russia">Russia</option> 
<option value="Rwanda">Rwanda</option> 
<option value="Saint Helena">Saint Helena</option> 
<option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option> 
<option value="Saint Lucia">Saint Lucia</option> 
<option value="Saint Vincent and the Grenadines">Saint Vincent and the Grenadines</option> 
<option value="Samoa">Samoa</option> 
<option value="San Marino">San Marino</option> 
<option value="Sao Tome and Principe">Sao Tome and Principe</option> 
<option value="Saudi Arabia">Saudi Arabia</option> 
<option value="Senegal">Senegal</option> 
<option value="Serbia">Serbia</option> 
<option value="Seychelles">Seychelles</option> 
<option value="Sierra Leone">Sierra Leone</option> 
<option value="Singapore">Singapore</option> 
<option value="Slovakia">Slovakia</option> 
<option value="Slovenia">Slovenia</option> 
<option value="Solomon Islands">Solomon Islands</option> 
<option value="Somalia">Somalia</option> 
<option value="South Africa">South Africa</option> 
<option value="South America">South America</option> 
<option value="South Korea">South Korea</option> 
<option value="South Sudan">South Sudan</option> 
<option value="Spain">Spain</option> 
<option value="Sri Lanka">Sri Lanka</option> 
<option value="Sudan">Sudan</option> 
<option value="Suriname">Suriname</option> 
<option value="Sweden">Sweden</option> 
<option value="Switzerland">Switzerland</option> 
<option value="Syria">Syria</option> 
<option value="Taiwan">Taiwan</option> 
<option value="Tajikistan">Tajikistan</option> 
<option value="Tanzania">Tanzania</option> 
<option value="Thailand">Thailand</option> 
<option value="Timor">Timor</option> 
<option value="Togo">Togo</option> 
<option value="Tonga">Tonga</option> 
<option value="Trinidad and Tobago">Trinidad and Tobago</option> 
<option value="Tunisia">Tunisia</option> 
<option value="Turkey">Turkey</option> 
<option value="Turks and Caicos Islands">Turks and Caicos Islands</option> 
<option value="Uganda">Uganda</option> 
<option value="Ukraine">Ukraine</option> 
<option value="United Arab Emirates">United Arab Emirates</option> 
<option value="United Kingdom">United Kingdom</option> 
<option value="United States">United States</option> 
<option value="Uruguay">Uruguay</option> 
<option value="Uzbekistan">Uzbekistan</option> 
<option value="Vanuatu">Vanuatu</option> 
<option value="Vatican">Vatican</option> 
<option value="Venezuela">Venezuela</option> 
<option value="Vietnam">Vietnam</option> 
<option value="World">World</option> 
<option value="Yemen">Yemen</option> 
<option value="Zambia">Zambia</option> 
<option value="Zimbabwe">Zimbabwe</option> 
</select>


    <!-- Select Indicator -->   
    <select id="ddlViewBy">
      <option value="retail and recreation">retail and recreation</option>
      <option value="grocery and pharmacy">grocery and pharmacy</option>
      <option value="parks">parks</option>
      <option value="transit stations">transit stations</option>
      <option value="workplaces">workplaces</option>
      <option value="residential">residential</option>
      <option value="driving">driving</option>
      <option value="walkiing">walking</option>
    </select>
        
    <div id="calendar" style="width: 100%; height: 150px;"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="d3.calendar.js"></script>
    <script>
            d3.select("#ddlViewBy").on("change", function(d){
              selectedGroup = String(this.value);
              d3.select("#calendar").selectAll("*").remove();
              updateChart(selectedGroup, selectedCountry)
            });
            d3.select("#calendarCountry").on("change", function(d){
              selectedCountry = String(this.value);
              d3.select('#calendar .chart').remove();
              updateChart(selectedGroup, selectedCountry)
            })

              
            //var e = document.getElementById("ddlViewBy");
            //var strUser = e.options[e.selectedIndex].text;
        
        function updateChart(selectedGroup, selectedCountry){
        
          d3.csv("https://raw.githubusercontent.com/ActiveConclusion/COVID19_mobility/master/summary_reports/summary_report_countries.csv", 
          function(error, data) {
            if (error) throw error;
            
            d3.timeFormatDefaultLocale({
                "decimal": ".",
                "thousands": ",",
                "grouping": [3],
                "currency": ["$", ""],
                "dateTime": "%a %b %e %X %Y",
                "date": "%m/%d/%Y",
                "time": "%H:%M:%S",
                "periods": ["AM", "PM"],
                "days": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                "shortDays": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
                "months": ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
                "shortMonths": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
            });
            
            //var newdata = data.filter(function(d){ return d.country == "Belgium"});
            
            var newdata = data.filter(function(d){ return d.country == selectedCountry});

            var chart = new Calendar(d3.select('#calendar'), newdata,{
                'datefield': 'date',
                'key' : selectedGroup,
                'year': 2020,
                'mondaystart': true,
            });
            
            var leg = d3.select("#calendar")
            // Handmade legend https://www.d3-graph-gallery.com/graph/custom_legend.html
            
            leg.append("rect")
            .attr("x", 100)
            .attr("y", function(d,i){ return 100 + i*(3+5)}) // 100 is where the first dot appears. 25 is the distance between dots
            .attr("width", 3)
            .attr("height", 3)
            .style("fill",  "#69b3a2")
            
            });
        };
    
    </script>
    
    
    <!-- Underneath: barplot -->
    <select id="country">
<option value="AFG">Afghanistan</option> 
<option value="OWID_AFR">Africa</option> 
<option value="ALB">Albania</option> 
<option value="DZA">Algeria</option> 
<option value="AND">Andorra</option> 
<option value="AGO">Angola</option> 
<option value="AIA">Anguilla</option> 
<option value="ATG">Antigua and Barbuda</option> 
<option value="ARG">Argentina</option> 
<option value="ARM">Armenia</option> 
<option value="ABW">Aruba</option> 
<option value="OWID_ASI">Asia</option> 
<option value="AUS">Australia</option> 
<option value="AUT">Austria</option> 
<option value="AZE">Azerbaijan</option> 
<option value="BHS">Bahamas</option> 
<option value="BHR">Bahrain</option> 
<option value="BGD">Bangladesh</option> 
<option value="BRB">Barbados</option> 
<option value="BLR">Belarus</option> 
<option value="BEL">Belgium</option> 
<option value="BLZ">Belize</option> 
<option value="BEN">Benin</option> 
<option value="BMU">Bermuda</option> 
<option value="BTN">Bhutan</option> 
<option value="BOL">Bolivia</option> 
<option value="BIH">Bosnia and Herzegovina</option> 
<option value="BWA">Botswana</option> 
<option value="BRA">Brazil</option> 
<option value="BRN">Brunei</option> 
<option value="BGR">Bulgaria</option> 
<option value="BFA">Burkina Faso</option> 
<option value="BDI">Burundi</option> 
<option value="KHM">Cambodia</option> 
<option value="CMR">Cameroon</option> 
<option value="CAN">Canada</option> 
<option value="CPV">Cape Verde</option> 
<option value="CYM">Cayman Islands</option> 
<option value="CAF">Central African Republic</option> 
<option value="TCD">Chad</option> 
<option value="CHL">Chile</option> 
<option value="CHN">China</option> 
<option value="COL">Colombia</option> 
<option value="COM">Comoros</option> 
<option value="COG">Congo</option> 
<option value="CRI">Costa Rica</option> 
<option value="CIV">Cote d'Ivoire</option> 
<option value="HRV">Croatia</option> 
<option value="CUB">Cuba</option> 
<option value="CUW">Curacao</option> 
<option value="CYP">Cyprus</option> 
<option value="CZE">Czechia</option> 
<option value="COD">Democratic Republic of Congo</option> 
<option value="DNK">Denmark</option> 
<option value="DJI">Djibouti</option> 
<option value="DMA">Dominica</option> 
<option value="DOM">Dominican Republic</option> 
<option value="ECU">Ecuador</option> 
<option value="EGY">Egypt</option> 
<option value="SLV">El Salvador</option> 
<option value="GNQ">Equatorial Guinea</option> 
<option value="ERI">Eritrea</option> 
<option value="EST">Estonia</option> 
<option value="SWZ">Eswatini</option> 
<option value="ETH">Ethiopia</option> 
<option value="OWID_EUR">Europe</option> 
<option value="OWID_EUN">European Union</option> 
<option value="FRO">Faeroe Islands</option> 
<option value="FLK">Falkland Islands</option> 
<option value="FJI">Fiji</option> 
<option value="FIN">Finland</option> 
<option value="FRA">France</option> 
<option value="GAB">Gabon</option> 
<option value="GMB">Gambia</option> 
<option value="GEO">Georgia</option> 
<option value="DEU">Germany</option> 
<option value="GHA">Ghana</option> 
<option value="GIB">Gibraltar</option> 
<option value="GRC">Greece</option> 
<option value="GRL">Greenland</option> 
<option value="GRD">Grenada</option> 
<option value="GTM">Guatemala</option> 
<option value="GGY">Guernsey</option> 
<option value="GIN">Guinea</option> 
<option value="GNB">Guinea-Bissau</option> 
<option value="GUY">Guyana</option> 
<option value="HTI">Haiti</option> 
<option value="HND">Honduras</option> 
<option value="HKG">Hong Kong</option> 
<option value="HUN">Hungary</option> 
<option value="ISL">Iceland</option> 
<option value="IND">India</option> 
<option value="IDN">Indonesia</option> 
<option value="OWID_INT">International</option> 
<option value="IRN">Iran</option> 
<option value="IRQ">Iraq</option> 
<option value="IRL">Ireland</option> 
<option value="IMN">Isle of Man</option> 
<option value="ISR">Israel</option> 
<option value="ITA">Italy</option> 
<option value="JAM">Jamaica</option> 
<option value="JPN">Japan</option> 
<option value="JEY">Jersey</option> 
<option value="JOR">Jordan</option> 
<option value="KAZ">Kazakhstan</option> 
<option value="KEN">Kenya</option> 
<option value="OWID_KOS">Kosovo</option> 
<option value="KWT">Kuwait</option> 
<option value="KGZ">Kyrgyzstan</option> 
<option value="LAO">Laos</option> 
<option value="LVA">Latvia</option> 
<option value="LBN">Lebanon</option> 
<option value="LSO">Lesotho</option> 
<option value="LBR">Liberia</option> 
<option value="LBY">Libya</option> 
<option value="LIE">Liechtenstein</option> 
<option value="LTU">Lithuania</option> 
<option value="LUX">Luxembourg</option> 
<option value="MAC">Macao</option> 
<option value="MDG">Madagascar</option> 
<option value="MWI">Malawi</option> 
<option value="MYS">Malaysia</option> 
<option value="MDV">Maldives</option> 
<option value="MLI">Mali</option> 
<option value="MLT">Malta</option> 
<option value="MHL">Marshall Islands</option> 
<option value="MRT">Mauritania</option> 
<option value="MUS">Mauritius</option> 
<option value="MEX">Mexico</option> 
<option value="FSM">Micronesia (country)</option> 
<option value="MDA">Moldova</option> 
<option value="MCO">Monaco</option> 
<option value="MNG">Mongolia</option> 
<option value="MNE">Montenegro</option> 
<option value="MSR">Montserrat</option> 
<option value="MAR">Morocco</option> 
<option value="MOZ">Mozambique</option> 
<option value="MMR">Myanmar</option> 
<option value="NAM">Namibia</option> 
<option value="NRU">Nauru</option> 
<option value="NPL">Nepal</option> 
<option value="NLD">Netherlands</option> 
<option value="NZL">New Zealand</option> 
<option value="NIC">Nicaragua</option> 
<option value="NER">Niger</option> 
<option value="NGA">Nigeria</option> 
<option value="OWID_NAM">North America</option> 
<option value="MKD">North Macedonia</option> 
<option value="OWID_CYN">Northern Cyprus</option> 
<option value="NOR">Norway</option> 
<option value="OWID_OCE">Oceania</option> 
<option value="OMN">Oman</option> 
<option value="PAK">Pakistan</option> 
<option value="PSE">Palestine</option> 
<option value="PAN">Panama</option> 
<option value="PNG">Papua New Guinea</option> 
<option value="PRY">Paraguay</option> 
<option value="PER">Peru</option> 
<option value="PHL">Philippines</option> 
<option value="POL">Poland</option> 
<option value="PRT">Portugal</option> 
<option value="QAT">Qatar</option> 
<option value="ROU">Romania</option> 
<option value="RUS">Russia</option> 
<option value="RWA">Rwanda</option> 
<option value="SHN">Saint Helena</option> 
<option value="KNA">Saint Kitts and Nevis</option> 
<option value="LCA">Saint Lucia</option> 
<option value="VCT">Saint Vincent and the Grenadines</option> 
<option value="WSM">Samoa</option> 
<option value="SMR">San Marino</option> 
<option value="STP">Sao Tome and Principe</option> 
<option value="SAU">Saudi Arabia</option> 
<option value="SEN">Senegal</option> 
<option value="SRB">Serbia</option> 
<option value="SYC">Seychelles</option> 
<option value="SLE">Sierra Leone</option> 
<option value="SGP">Singapore</option> 
<option value="SVK">Slovakia</option> 
<option value="SVN">Slovenia</option> 
<option value="SLB">Solomon Islands</option> 
<option value="SOM">Somalia</option> 
<option value="ZAF">South Africa</option> 
<option value="OWID_SAM">South America</option> 
<option value="KOR">South Korea</option> 
<option value="SSD">South Sudan</option> 
<option value="ESP">Spain</option> 
<option value="LKA">Sri Lanka</option> 
<option value="SDN">Sudan</option> 
<option value="SUR">Suriname</option> 
<option value="SWE">Sweden</option> 
<option value="CHE">Switzerland</option> 
<option value="SYR">Syria</option> 
<option value="TWN">Taiwan</option> 
<option value="TJK">Tajikistan</option> 
<option value="TZA">Tanzania</option> 
<option value="THA">Thailand</option> 
<option value="TLS">Timor</option> 
<option value="TGO">Togo</option> 
<option value="TON">Tonga</option> 
<option value="TTO">Trinidad and Tobago</option> 
<option value="TUN">Tunisia</option> 
<option value="TUR">Turkey</option> 
<option value="TCA">Turks and Caicos Islands</option> 
<option value="UGA">Uganda</option> 
<option value="UKR">Ukraine</option> 
<option value="ARE">United Arab Emirates</option> 
<option value="GBR">United Kingdom</option> 
<option value="USA">United States</option> 
<option value="URY">Uruguay</option> 
<option value="UZB">Uzbekistan</option> 
<option value="VUT">Vanuatu</option> 
<option value="VAT">Vatican</option> 
<option value="VEN">Venezuela</option> 
<option value="VNM">Vietnam</option> 
<option value="OWID_WRL">World</option> 
<option value="YEM">Yemen</option> 
<option value="ZMB">Zambia</option> 
<option value="ZWE">Zimbabwe</option> 
    </select>
    
    <select id="indicator">
      <option value="new_cases">new cases</option>
      <option value="new_deaths">new deaths</option>
      <option value="new_tests">new tests</option>
      <option value="positive_rate">positive rate</option>
    </select>
    

    

    <div id="Exports" style="width: 100%; height: 300px;"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
    <script src="d3.barchart.js"></script>
    
    
    <script>
            d3.select("#indicator").on("change", function(d){
              selectedInd = String(this.value);
              d3.select("#Exports").selectAll("*").remove();
              //d3.select('#Exports .grafico').remove();
              updateBar(selectedInd, selectedCountry)
            })
            
            d3.select("#country").on("change", function(d){
              selectedCountry = String(this.value);
              d3.select("#Exports").selectAll("*").remove();
              updateBar(selectedInd, selectedCountry)
            })

            
        function updateBar(selectedInd, selectedCountry){

        //d3.csv('./assets/nz-owid.csv', function(data) {
        d3.csv('https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv', function(data) {
          
          var newdata = data.filter(function(d){ return d.iso_code == selectedCountry });
          
          tokeep = ["2020-01-01","2020-01-06","2020-01-13","2020-01-20","2020-01-27",
"2020-02-03","2020-02-10","2020-02-17","2020-02-24","2020-03-02", "2020-03-09",
"2020-03-16", "2020-03-23", "2020-03-30", "2020-04-06", "2020-04-13", "2020-04-20", 
"2020-04-27", "2020-05-04", "2020-05-11", "2020-05-18", "2020-05-25",
"2020-06-01" ,"2020-06-08", "2020-06-15", "2020-06-22", "2020-06-29", "2020-07-06", 
"2020-07-13", "2020-07-20", "2020-07-27", "2020-08-03", "2020-08-10",
"2020-08-17","2020-08-24","2020-08-31","2020-09-07","2020-09-14","2020-09-21","2020-09-28",
"2020-10-05","2020-10-12","2020-10-19","2020-10-26","2020-11-02","2020-11-09","2020-11-16", 
"2020-11-23", "2020-11-30", "2020-12-07", "2020-12-14", "2020-12-21", "2020-12-28"]
          
          var newdata = newdata.filter(function(d,i){ return tokeep.indexOf(d.date) >= 0 });
          
          //var keyInd = selectedInd || 0;
          //var parseDate = d3.utcParse("%Y-%m-%d");
          //var formatdate = d3.timeFormat("%m-%d");
          //var keyDate =formatdate(parseDate(tokeep));
          
          
            var grafico = new BarChart(d3.select('#Exports'), newdata, {
                'key': selectedInd || 0,
                'label': 'date',
                'mean': {},
                'meanlabel': '',
                'color': 'darkgrey',
                'title': selectedInd,
                'source': '',
            });
        });
        };

    </script> 
</body>
</html>
